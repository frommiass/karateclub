# KarateClub - Android App

## Обзор проекта
Это Android-приложение для управления карате-клубом. Проект построен с использованием мультимодульной архитектуры и современного стека технологий.

## Технический стек
- **Kotlin** - основной язык программирования
- **MVVM** - архитектурный паттерн
- **Jetpack Compose** - для построения UI
- **Koin** - для внедрения зависимостей
- **Navigation Component** - для навигации между экранами
- **Google Sheets API** - для хранения и получения данных
- **DataStore/SharedPreferences** - для локального кэширования

## Структура проекта
Проект разделен на модули для лучшей организации кода, возможности повторного использования и ускорения процесса сборки:

### app
Главный модуль приложения, который содержит:
- MainActivity (единственная Activity в приложении)
- Класс Application с настройкой Koin
- Навигационный граф (Navigation Component)

### core
Модуль с базовыми компонентами:
- Навигационные константы (NavRoutes)
- DI (Модули Koin)
- Утилиты и расширения Kotlin
- Базовые интерфейсы

### data
Слой данных:
- Реализации репозиториев
- GoogleSheetsService для работы с Google Sheets API
- Локальное кэширование через DataStore/SharedPreferences
- Модели данных для сетевого слоя
- Маппинг между сетевыми и доменными моделями

### domain
Бизнес-логика:
- UseCases
- Интерфейсы репозиториев
- Доменные модели
- Обработчики бизнес-логики

### features
Директория, содержащая фичи-модули:

#### features/players
Функциональность работы с участниками:
- Экраны списка, детальной информации и редактирования участников
- ViewModels для соответствующих экранов
- Composable компоненты для этих экранов

#### features/groups
Функциональность работы с группами:
- Экраны списка и детальной информации о группах
- ViewModels для соответствующих экранов
- Composable компоненты для этих экранов

### ui-common
Общие UI компоненты:
- Темы и стили
- Общие Composable функции
- Иконки и ресурсы

## Текущее состояние проекта
На данный момент:
- Настроена базовая структура мультимодульного проекта
- Создан основной навигационный граф
- Настроен DI с Koin
- Реализован основной UI на основе Jetpack Compose
- Настроены правильные зависимости между модулями для предотвращения конфликтов

## Настройка проекта
1. Склонируйте репозиторий
2. Убедитесь, что у вас установлена JDK 17
3. Откройте проект в Android Studio Iguana (2023.2.1) или новее
4. Синхронизируйте Gradle
5. Запустите приложение

## Правила работы с зависимостями
Для предотвращения конфликтов дублирующихся классов:

- В `ui-common` используйте `api` для Compose зависимостей, чтобы они были доступны другим модулям
- В других модулях используйте `implementation` для всех зависимостей
- Избегайте дублирования зависимостей в модулях
- Используйте правило: "зависимость должна быть объявлена только в одном месте"

## Работа с модулями
При работе с модулями важно учитывать зависимости между ними:
- `app` зависит от всех остальных модулей
- feature-модули зависят от `core`, `domain` и `ui-common`
- `data` зависит от `domain`
- `domain` не зависит ни от одного модуля
- `core` не зависит ни от одного модуля
- `ui-common` не зависит ни от одного модуля

## Инструкции по разработке
1. При добавлении новой фичи создавайте её в соответствующем feature-модуле
2. Бизнес-логику размещайте в модуле `domain`
3. Для работы с данными используйте модуль `data`
4. Общие UI-компоненты добавляйте в `ui-common`
5. Утилиты и расширения добавляйте в `core`

## Проблемы и их решения
- При ошибках с неразрешенными ссылками проверьте, что добавлены все необходимые зависимости в build.gradle.kts соответствующего модуля
- При проблемах с новыми модулями, убедитесь что они:
  1. Добавлены в settings.gradle.kts
  2. Имеют правильную структуру (AndroidManifest.xml, правильные пакеты)
  3. Имеют корректный файл build.gradle.kts с нужными зависимостями
- Если появляются ошибки "Duplicate class", проверьте, что зависимости не дублируются в разных модулях
- При конфликтах зависимостей используйте `exclude` для исключения проблемных транзитивных зависимостей

## Планы на будущее
- Полная реализация экранов для работы с участниками
- Полная реализация экранов для работы с группами
- Интеграция с Google Sheets API
- Добавление оффлайн-режима с использованием Room
- Внедрение средств аналитики

## Ссылки на документацию
- [Jetpack Compose](https://developer.android.com/jetpack/compose)
- [Navigation Component](https://developer.android.com/guide/navigation/navigation-getting-started)
- [Koin](https://insert-koin.io/)
- [Google Sheets API](https://developers.google.com/sheets/api)
- [Multi-module Architecture](https://developer.android.com/topic/modularization)